---
title: "Regional Trends in Renewable Energy Investment"
description: |
  A short description of the post.
author:
  - name: Joe DeCesaro
    url: {}
date: 11-23-2021
output:
  distill::distill_article:
    self_contained: false
draft: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r}
library(tidyverse)
library(here)
library(readxl)
library(janitor)
```


# What is the trend of renewable energy investment over time?

Implementation of renewable energy into electric grids around the world will be key to curbing the effects of climate change. Financial investment in large scale power plants has always had a long return on investment timeline. In the past, renewable energy technologies such as solar and wind have been expensive forms of generating electricity but, over the last ten years there has been a steep decline in their costs. From 2009 to 2019 the price of electricity from solar power has dropped 89% and the wind has dropped 70% (Roser, 2020). This begs the question, how is investment in renewable technologies changing over time? How does this compare to investment in non-renewable energy?

This question is important to know for the future of climate change. As climate change becomes an ever more present and increasing threat, detecting these trends can tell us if our world is on the right track to reducing carbon emissions from energy generation. No doubt there is research into this topic in the public and private sector, however answers were not readily available when conducting research into this question. This blog post hopes to fill this void and provide insights into renewable energy investment trends over time. This post is by no means a comprehensive study, however it will provide some quick insights.

## Data 

The data being used is annualized totals of investment for each data point and therefore does not have a seasonal component.

```{r}
# Make file path for the data
fp <- here("_posts/2021-11-23-detecting-trends-in-renewable-energy-investment/data/IRENA_RE_Public_Investment_July2021.xlsx")

# Read in the data using the readxl package
fin_energy <- read_excel(fp)
```
```{r}
# Clean the data to remove fields that are not needed
fin_energy <- fin_energy %>% 
  clean_names() 

# Remove unnecessary columns and the "multilateral" region 
fin_energy <- fin_energy %>% 
  select(iso_code:region, year:technology, amount_2019_usd_million) %>% 
  filter(region != "Multilateral")
```

```{r}
# Separate the data into the renewable and non-renewable investments
renewable_fin <- fin_energy %>% 
  filter(category == "Renewables") %>% 
  group_by(country_area, region, year) %>% 
  summarise(country_sum = sum(amount_2019_usd_million))

non_renewable_fin <- fin_energy %>% 
  filter(category =="Non-renewables") %>% 
  group_by(country_area, region, year) %>% 
  summarise(country_sum = sum(amount_2019_usd_million))
```

```{r}
# Make data table for renewables for by region
region_renewable_fin <- renewable_fin %>% 
  group_by(region, year) %>% 
  summarise(region_sum = sum(country_sum))

# Make data table for non-renewables for by region
region_non_renewable_fin <- non_renewable_fin %>% 
  group_by(region, year) %>% 
  summarise(region_sum = sum(country_sum))
```

## Analysis Plan

First, a simple static time series model will explore the overall trend of the total annual amount invested in renewable energy by region. Regions are broken into Africa, Asia, Central America and the Caribbean, Eurasia, Europe, Middle East, Oceania, and South America.  By running this simple model we can get a quick glimpse into the global trend of renewable investment. This assumes that only the immediate year in question has an effect on the quantity of investment. This will then be compared to the trend in non-renewable energy source investment over the same time period.

Second, a more complex model time series model will be made where we take the simple model and break it up by regional heterogeneity to produce an interaction model. As mentioned earlier, it is no secret that change usually occurs where money flows. Our general trend in investment from the first model is important as climate change is a global issue and it provides us with a quick insight into how the world is fairing as a whole. However, with agreements like The Paris Agreement we know it will take each country's and region's participation to minimize and eventually reverse the effects of climate change. With this in mind, the simple model produced earlier could hide that certain regions are regressing in investment while larger investments in other regions push the overall trend positive. If regions are truly committed to curbing climate change our model will show an overall positive trend. This evaluation will serve as a litmus test to see regional commitment to global climate agreements. Finally, regional renewable trends will then be compared to their non-renewable counterparts.

## Results
### Simple Renewable Investment Trend Model
```{r}
# Lets make our simple model for renewable energy
model_renew <- lm(region_sum ~ year, data = region_renewable_fin)

summary_model_renew <- summary(model_renew)
summary_model_renew
```
Using the `summary()` function, we can quickly get some insights from our model. From this output we are most concerned with the coefficient estimate of the year, which is `r round(summary_model_renew$coefficients[2,"Estimate"], 2)` million USD. This tells us that, according to this model, with each passing year we are seeing a increase in renewable investment by more than 141,000,000 USD across each region per year. Overall this is a positive trend for renewable investments year over year.

From the `summary()` function we are also able to get a p-value for the trend coefficient. The p-value is represented in the "Coefficients" section of the table under "Pr(>|t|)". The year coefficient has a p-value below 0.001 which gives us confidence in rejecting a null hypothesis that there is no relationship between investment sums across time with a confidence interval of 0.001. It should be noted that our R-squared value for this model is 0.13 however that is not important for this analysis as we are not focused on predicting outcomes of investment with high precision, but rather the overall trend from the year coefficient and its' associated p-value.

Now that we can see that there is a positive trend in renewable investments, lets compare that to non-renewable investment.

### Simple Non-renewable Investment Model
```{r}
# Lets make a model for non-renewables
model_non_renew <- lm(region_sum ~ year, data = region_non_renewable_fin)

summary_model_non_renew <- summary(model_non_renew)
summary_model_non_renew
```
From the `summary()` of this model we can see that by country there is also a positive trend of non-renewable investment across regions. According to this model there is an increase in non-renewable investments by `r round(summary_model_non_renew$coefficients[2,"Estimate"], 2)` million USD. With a p-value of 0.005 can confidently reject a null hypothesis of there being no relationship between non-renewable investment over time. According to these two simple models, there is a larger increase in renewable investments year over year compared to non-renewables. Below is a plot that compares renewable and non-renewable investments over time, along with their respective models.

```{r}
simple_model_plot <- ggplot(data = region_renewable_fin, 
                            aes(x = year, y = region_sum)) + 
  geom_point(color = "darkgreen", 
             alpha = 0.8) + 
  geom_point(data = region_non_renewable_fin, 
             aes(x = year, y = region_sum), 
             color = "tan3",
             alpha = 0.8) +
  labs(caption = "Renewable investments from 2000-2020 are increasing at a rate of 141 million USD per year according to this model.\n Non-renewable invesments over the same time period are increasing at a rate of 110 million USD per year.", 
       title = "Comparing Investment Renewable and Non-Renewable Energy Investment
Across Regions") +
  xlab(label = "Year") +
  ylab(label = "Annual Regional Sum of Investment (million USD)") +
  theme_bw()
  
simple_model_plot
```



As this data is only from the years 2000-2020 these investment trends do not reflect the historical investments in non-renewable energy sources. As this simple regression only looks at the trend over time we will now see how these investment trends compare across regions. In the original model outlier regional trends could be affecting our simple investment trend.

### Regional Renewable Investment
```{r}
# Make levels for regions with North America as first to compare our region to the rest of the world
region_renewable_fin$region <- factor(region_renewable_fin$region, levels = c("North America", "Africa", "Asia", "Central America and the Caribbean", "Eurasia", "Europe", "Middle East", "Oceania", "South America"))

# Make the regional investment model
region_model <-  lm(region_sum ~ year + region:year, data = region_renewable_fin)
region_renew_model_summary <- summary(region_model)
region_renew_model_summary
```
```{r}
# Making the results a summary table
summary_renew_region_table <- data.frame(Region = c("North America", 
                                                      "Africa", 
                                                      "Asia", 
                                                      "Central America and the Caribbean", 
                                                      "Eurasia", 
                                                      "Europe", 
                                                      "Middle East", 
                                                      "Oceania", 
                                                      "South America"), 
                                         Renewable_Investment = c(region_renew_model_summary$coefficients[2,"Estimate"], 
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[3,"Estimate"],
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[4,"Estimate"],
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[5,"Estimate"],
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[6,"Estimate"],
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[7,"Estimate"],
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[8,"Estimate"],
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[9,"Estimate"],
                                                                  region_renew_model_summary$coefficients[2,"Estimate"] + region_renew_model_summary$coefficients[10,"Estimate"]),
                                         p_value = c(region_renew_model_summary$coefficients[2,"Pr(>|t|)"], 
                                                                                         region_renew_model_summary$coefficients[3,"Pr(>|t|)"],
                                                                                         region_renew_model_summary$coefficients[4,"Pr(>|t|)"],
                                                                                         region_renew_model_summary$coefficients[5,"Pr(>|t|)"],
                                                                                         region_renew_model_summary$coefficients[6,"Pr(>|t|)"],
                                                                                         region_renew_model_summary$coefficients[7,"Pr(>|t|)"],
                                                                                         region_renew_model_summary$coefficients[8,"Pr(>|t|)"],
                                                                                         region_renew_model_summary$coefficients[9,"Pr(>|t|)"],
                                                                                         region_renew_model_summary$coefficients[10,"Pr(>|t|)"])
)
```


Discuss results...


```{r}
# Make levels for regions with North America as first to compare our region to the rest of the world
region_non_renewable_fin$region <- factor(region_non_renewable_fin$region, levels = c("North America", "Africa", "Asia", "Central America and the Caribbean", "Eurasia", "Europe", "Middle East", "Oceania", "South America"))

# Make the regional investment model
region_non_renewable_model <-  lm(region_sum ~ year + region:year, data = region_non_renewable_fin)
region_non_renewable_model_summary <- summary(region_non_renewable_model)
region_non_renewable_model_summary
```

### Plots
```{r}
# simple plot with the model for renewables
plot_renewable <- ggplot(data = region_renewable_fin, aes(x = year, y = region_sum)) +
  geom_point(size = 2,
             alpha = 0.3) +
  geom_smooth(data = region_renewable_fin,
              method = lm, 
              formula = region_sum ~ year + year:region,
              color = "skyblue")

plot_renewable
```

```{r}
# simple plot with the model for renewables
plot_non_renewable <- ggplot(data = non_renewable_fin, aes(x = year, y = country_sum)) +
  geom_point(size = 2,
             alpha = 0.3) +
  geom_smooth(method = lm, 
              formula = y~x,
              color = "skyblue")

plot_non_renewable
```




## Next Steps
